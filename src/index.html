<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Fluent Now - AI Language Learning</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/img/favicon-48x48.png">
    <!-- Marked.js for markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/marked.min.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
    <!-- Main Container -->
    <div id="main-container">
        <!-- Header Section -->
        <div id="header">
            <div id="header-top">
                <button id="hamburger-menu" onclick="app.toggleAboutMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div id="about-dropdown" style="display: none;">
                    <button onclick="app.showAboutModal()">About</button>
                </div>
            </div>
            <div id="title-container">
                <div id="logo-svg">
                    <svg viewBox="0 0 120 60" xmlns="http://www.w3.org/2000/svg">
                        <!-- Speech bubble -->
                        <path d="M15 10 Q10 10 10 15 L10 35 Q10 40 15 40 L35 40 L45 50 L42 40 L95 40 Q100 40 100 35 L100 15 Q100 10 95 10 Z" 
                              fill="url(#bubbleGradient)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                        
                        <!-- Text GFN -->
                        <text x="55" y="32" text-anchor="middle" class="logo-text">GFN</text>
                        
                        <!-- Gradient definitions -->
                        <defs>
                            <linearGradient id="bubbleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#4f46e5;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#7c3aed;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#ec4899;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <h1 id="main-title">Get Fluent Now</h1>
            </div>
            <p id="subtitle">AI-powered language learning with Google Gemini</p>
        </div>

        <!-- Status Display -->
        <div id="status">ğŸ”‘ Please enter your Gemini API key to enable AI chat</div>

        <!-- API Configuration Section -->
        <div id="api-section" class="config-section">
            <div id="api-header" class="config-header" onclick="app.toggleApiSection()">
                <span id="api-status-indicator" class="status-indicator required">ğŸ”‘</span>
                <span id="api-header-text">API Configuration</span>
                <span id="api-toggle-icon" class="toggle-icon">â–¼</span>
            </div>
            <div id="api-content" class="config-content expanded">
                <div id="api-input-container">
                    <input 
                        type="password" 
                        id="gemini-api-key" 
                        placeholder="Enter your Gemini API key" 
                        autocomplete="off"
                    >
                    <button id="validate-key-btn" onclick="app.validateApiKey()">Validate Key</button>
                    <button id="help-btn" onclick="app.showApiHelp()">â“ Get API Key</button>
                </div>
                <!-- Model Selection -->
                <div id="model-section">
                    <h3>ğŸ§  AI Model</h3>
                    <div id="model-options">
                        <label class="radio-option">
                            <input type="radio" name="model" value="flash-lite" checked onchange="app.updateModel()">
                            <span class="radio-label">
                                <strong>Gemini 2.5 Flash Lite</strong>
                                <small>Latest model, fastest and most cost-effective</small>
                            </span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="model" value="flash" onchange="app.updateModel()">
                            <span class="radio-label">
                                <strong>Gemini 2.5 Flash</strong>
                                <small>Best price/performance, advanced capabilities</small>
                            </span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="model" value="pro" onchange="app.updateModel()">
                            <span class="radio-label">
                                <strong>Gemini 1.5 Pro</strong>
                                <small>Highest quality, slower</small>
                            </span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- App Controls -->
        <div id="app-controls" style="display: none;">

            <!-- Language Configuration -->
            <div id="language-section">
                <div id="language-controls">
                    <div id="source-lang-control">
                        <label for="source-lang">ğŸ“š Story Language:</label>
                        <select id="source-lang" onchange="app.updateLanguages()">
                            <option value="Spanish">Spanish (espaÃ±ol)</option>
                            <option value="French">French (franÃ§ais)</option>
                            <option value="Italian">Italian (italiano)</option>
                            <option value="German">German (Deutsch)</option>
                            <option value="Portuguese">Portuguese (portuguÃªs)</option>
                            <option value="Dutch">Dutch (Nederlands)</option>
                            <option value="Russian">Russian (Ñ€ÑƒÑÑĞºĞ¸Ğ¹)</option>
                            <option value="Japanese">Japanese (æ—¥æœ¬èª)</option>
                            <option value="Korean">Korean (í•œêµ­ì–´)</option>
                            <option value="Chinese (Simplified)">Chinese (ä¸­æ–‡)</option>
                            <option value="Arabic">Arabic (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
                            <option value="English">English</option>
                        </select>
                    </div>
                    <div id="target-lang-control">
                        <label for="target-lang">ğŸ¯ Translate to:</label>
                        <select id="target-lang" onchange="app.updateLanguages()">
                            <option value="English">English</option>
                            <option value="Spanish">Spanish (espaÃ±ol)</option>
                            <option value="French">French (franÃ§ais)</option>
                            <option value="Italian">Italian (italiano)</option>
                            <option value="German">German (Deutsch)</option>
                            <option value="Portuguese">Portuguese (portuguÃªs)</option>
                            <option value="Dutch">Dutch (Nederlands)</option>
                            <option value="Russian">Russian (Ñ€ÑƒÑÑĞºĞ¸Ğ¹)</option>
                            <option value="Japanese">Japanese (æ—¥æœ¬èª)</option>
                            <option value="Korean">Korean (í•œêµ­ì–´)</option>
                            <option value="Chinese (Simplified)">Chinese (ä¸­æ–‡)</option>
                            <option value="Arabic">Arabic (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
                        </select>
                    </div>
                </div>
                <button id="swap-languages" onclick="app.swapLanguages()">ğŸ”„ Swap Languages</button>
            </div>

            <!-- Difficulty Level -->
            <div id="difficulty-section">
                <h3>ğŸ“Š Difficulty Level (CEFR)</h3>
                <select id="difficulty-level">
                    <option value="A1">A1 - Complete Beginner</option>
                    <option value="A2">A2 - Elementary</option>
                    <option value="B1">B1 - Intermediate</option>
                    <option value="B2">B2 - Upper Intermediate</option>
                    <option value="C1">C1 - Advanced</option>
                </select>
            </div>

            <!-- Theme Selection -->
            <div id="theme-section">
                <h3>ğŸ¨ Story Theme</h3>
                <select id="story-theme">
                    <option value="daily_life">Daily Life</option>
                    <option value="travel">Travel & Adventure</option>
                    <option value="food">Food & Cooking</option>
                    <option value="friendship">Friendship & Relationships</option>
                    <option value="work">Work & Career</option>
                    <option value="shopping">Shopping & Money</option>
                    <option value="health">Health & Wellness</option>
                    <option value="hobbies">Hobbies & Entertainment</option>
                    <option value="family">Family & Home</option>
                    <option value="nature">Nature & Environment</option>
                    <option value="technology">Technology & Modern Life</option>
                    <option value="education">Education & Learning</option>
                    <option value="custom">Custom Theme</option>
                </select>
                <div id="custom-theme-container" style="display: none;">
                    <input 
                        type="text" 
                        id="custom-theme-input" 
                        placeholder="Describe your custom story theme..."
                    >
                </div>
            </div>

            <!-- Story Generation -->
            <div id="story-section">
                <button id="generate-story-btn" onclick="app.generateStory()">
                    âœ¨ Generate New Story
                </button>
                <div id="story-output"></div>
            </div>

            <!-- Translation Section -->
            <div id="translation-section" style="display: none;">
                <h3>ğŸ”¤ Translate Each Sentence</h3>
                <div id="sentence-translation-container">
                    <!-- Sentence-by-sentence translation boxes will be generated here -->
                </div>
                <div id="translation-controls">
                    <button id="submit-translation-btn" onclick="app.submitSentenceTranslations()">
                        ğŸ¯ Get Feedback
                    </button>
                    <button id="mini-lesson-btn" onclick="app.generateMiniLesson()" style="display: none;">
                        ğŸ“š Generate Mini Lesson
                    </button>
                </div>
                
                <!-- Results Tabs -->
                <div id="results-tabs" style="display: none;">
                    <div id="tab-buttons">
                        <button id="feedback-tab" class="tab-button active" onclick="app.switchTab('feedback')">
                            ğŸ¯ Feedback
                        </button>
                        <button id="lesson-tab" class="tab-button" onclick="app.switchTab('lesson')">
                            ğŸ“š Mini Lesson
                        </button>
                    </div>
                    <div id="tab-content">
                        <div id="feedback-tab-content" class="tab-panel active">
                            <div id="feedback-output"></div>
                        </div>
                        <div id="lesson-tab-content" class="tab-panel">
                            <div id="lesson-output"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Floating Chat Widget -->
        <div id="chat-widget">
            <div id="chat-toggle" onclick="app.toggleChat()">ğŸ’¬</div>
            <div id="chat-container" style="display: none;">
                <div id="chat-header">
                    <div id="chat-header-content">
                        <h4>ğŸ¤– AI Assistant</h4>
                        <div id="chat-controls">
                            <button id="chat-clear" onclick="app.clearChat()" title="Clear chat">ğŸ—‘ï¸</button>
                            <button id="chat-minimize" onclick="app.minimizeChat()" title="Minimize">âˆ’</button>
                            <button id="chat-close" onclick="app.toggleChat()" title="Close">Ã—</button>
                        </div>
                    </div>
                    <div id="chat-resize-handle"></div>
                </div>
                <div id="chat-body">
                    <div id="chat-messages"></div>
                    <div id="chat-input-container">
                        <textarea 
                            id="chat-input" 
                            placeholder="Ask about grammar, vocabulary, or translations..."
                            rows="1"
                            onkeydown="app.handleChatKeyPress(event)"
                        ></textarea>
                        <button id="chat-send-btn" onclick="app.sendChatMessage()">Send</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- API Help Modal -->
    <div id="help-modal" style="display: none;">
        <div id="help-content">
            <div id="help-header">
                <h2>ğŸ”‘ Get Your Free Google Gemini API Key</h2>
                <button id="close-help" onclick="app.closeApiHelp()">Ã—</button>
            </div>
            <div id="help-steps">
                <div class="help-step">
                    <h3>Step 1: Visit Google AI Studio</h3>
                    <p>Go to <a href="https://ai.google.dev/gemini-api/docs/api-key" target="_blank">ai.google.dev/gemini-api/docs/api-key</a></p>
                </div>
                <div class="help-step">
                    <h3>Step 2: Sign in</h3>
                    <p>Sign in with your Google account (it's free!)</p>
                </div>
                <div class="help-step">
                    <h3>Step 3: Create API Key</h3>
                    <p>Click "Get API key" â†’ "Create API key in new project"</p>
                </div>
                <div class="help-step">
                    <h3>Step 4: Copy & Paste</h3>
                    <p>Copy the API key and paste it into the input field above</p>
                </div>
                <div class="help-note">
                    <p><strong>âœ… Free tier includes:</strong> 15 requests per minute, 1 million tokens per day</p>
                    <p><strong>ğŸ”’ Privacy:</strong> Your API key is stored locally in your browser only</p>
                </div>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div id="about-modal" style="display: none;">
        <div id="about-content">
            <div id="about-header">
                <h2>ğŸŒ About Get Fluent Now</h2>
                <button id="close-about" onclick="app.closeAboutModal()">Ã—</button>
            </div>
            <div id="about-body">
                <div class="about-section">
                    <h3>What is Get Fluent Now?</h3>
                    <p>Get Fluent Now is an AI-powered language learning application that helps you practice translation skills through interactive stories and personalized feedback.</p>
                </div>
                
                <div class="about-section">
                    <h3>âœ¨ Features</h3>
                    <ul>
                        <li><strong>AI Story Generation:</strong> Generate stories in 12 languages at different CEFR levels (A1-C1)</li>
                        <li><strong>Sentence-by-Sentence Practice:</strong> Translate individual sentences for targeted learning</li>
                        <li><strong>Intelligent Feedback:</strong> Get detailed AI feedback on your translations</li>
                        <li><strong>Interactive Lessons:</strong> Structured mini-lessons with exercises and answer keys</li>
                        <li><strong>Smart Chat Assistant:</strong> Context-aware AI help for grammar and vocabulary questions</li>
                        <li><strong>Theme Variety:</strong> Choose from 12 preset themes or create custom scenarios</li>
                    </ul>
                </div>
                
                <div class="about-section">
                    <h3>ğŸ”’ Privacy & Security</h3>
                    <p>Your API key is stored locally in your browser and only sent to Google's Gemini AI servers. No data is collected or stored externally.</p>
                </div>
                
                <div class="about-section">
                    <h3>ğŸ’» Open Source</h3>
                    <p>Get Fluent Now is open source and available on GitHub:</p>
                    <a href="https://github.com/cestella/getfluentnow" target="_blank" class="github-link">
                        ğŸ“‚ View on GitHub
                    </a>
                </div>
                
                <div class="about-section">
                    <h3>ğŸ› ï¸ Technology</h3>
                    <p>Built with vanilla JavaScript, powered by Google Gemini 2.5 AI models, and packaged as a single HTML file for easy deployment.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script type="module" src="/js/app.js"></script>
</body>
</html>
